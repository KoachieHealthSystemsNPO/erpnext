{
 "align_labels_right": 0, 
 "creation": "2017-07-31 19:48:47.160274", 
 "custom_format": 0, 
 "disabled": 0, 
 "doc_type": "Sales Invoice", 
 "docstatus": 0, 
 "doctype": "Print Format", 
 "font": "Default", 
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<table style=\\\"width: 100%;\\\">\\n\\t   <tr style=\\\"border-bottom: 1px solid silver; font-size: small !important;\\\">\\n\\t\\t   <td style=\\\"text-align: left;\\\"><br /><strong>iGLOi AG</strong><br />\\n\\t\\t\\tTMC Fashion Center<br />\\n\\t\\t\\tThurgauerstrasse 117<br />\\n\\t\\t\\t8152 Glattbrugg<br /></td>\\n\\t\\t\\t<td style=\\\"text-align: left;\\\">\\n\\t\\t\\t\\t<img src=\\\"/files/iGLOi.png\\\" alt=\\\"iGLOi\\\" style=\\\"height: 100px; width: 300px !important;\\\" /></td>\\n\\t\\t\\t<td><br />{{ _(\\\"Phone\\\") }}<br />\\n\\t\\t\\t{{ _(\\\"Fax\\\") }}<br />\\n\\t\\t\\t{{ _(\\\"E-Mail\\\") }}<br />\\n\\t\\t\\tMwSt.-Nr.</td>\\n\\t\\t\\t<td><br />044 780 13 13<br />\\n\\t\\t\\t044 780 11 13<br />\\n\\t\\t\\toffice@igloi.ch<br />\\n\\t\\t\\tCHE-101.527.569</td>\\n\\t   </tr>\\n\\t</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Address\"}, {\"fieldtype\": \"Column Break\"}, {\"print_hide\": 0, \"options\": \"<!-- addresses -->\\n<table style=\\\"width: 100%; font-family: 'Open Sans', sans-serif;\\\">\\n   <tr>\\n\\t<td style=\\\"width: 50%;\\\"><!-- left --></td>\\n\\t<td style=\\\"width: 50%;\\\"><!-- right --></td>\\n   </tr>\\n   <tr>\\n\\t<td><!-- left --></td>\\n\\t<td><br />{{ doc.customer_name }}<br />\\n\\t    {{ doc.address_display }}</td>\\n   </tr>\\n</table>\", \"fieldname\": \"_custom_html\", \"fieldtype\": \"HTML\", \"label\": \"Custom HTML\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Document\"}, {\"fieldtype\": \"Column Break\"}, {\"print_hide\": 0, \"options\": \"<!-- order details -->\\n<p><br /></p>\\n<table style=\\\"width: 100%; font-family: 'Open Sans', sans-serif;\\\">\\n   <tr>\\n\\t<td style=\\\"width: 20%;\\\"><strong>{{ _(\\\"Invoice\\\") }}</strong></td>\\n\\t<td style=\\\"width: 30%;\\\">{{ doc.name }}</td>\\n\\t<td style=\\\"width: 20%;\\\"></td>\\n\\t<td style=\\\"width: 30%;\\\"></td>\\n   </tr>\\n   <tr>\\n\\t<td>\\n\\t  {{ _(\\\"Invoice date\\\") }}<br />\\n\\t  {{ _(\\\"Payable to\\\") }}<br />\\n\\t</td>\\n\\t<td>\\n\\t  {{ frappe.utils.get_datetime(posting_date).strftime('%d.%m.%Y') }}<br />\\n\\t  {{ frappe.utils.get_datetime(due_date).strftime('%d.%m.%Y') }}\\n\\t</td>\\n\\t<td>\\n\\t  {{ _(\\\"Amount\\\") }}<br />\\n\\t  IBAN\\n\\t</td>\\n\\t<td>\\n\\t  {{ doc.get_formatted('grand_total') }}<br />\\n\\t  {% set company = frappe.get_doc(\\\"Company\\\", doc.company) %}\\n\\t  {{ company.iban }}\\n\\t</td>\\n   </tr>\\n</table>\\n\\n<p style=\\\"font-family: 'Open Sans', sans-serif;\\\"><br /><br />{{ _(\\\"We allow ourselves to charge the following items:\\\") }}</p>\", \"fieldname\": \"_custom_html\", \"fieldtype\": \"HTML\", \"label\": \"Custom HTML\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Content\"}, {\"fieldtype\": \"Column Break\"}, {\"print_hide\": 0, \"options\": \"<!-- positions -->\\n<p></p>\\n <table  style=\\\"width: 100%; font-family: 'Open Sans', sans-serif;\\\">\\n <tr>\\n    <th style=\\\"width: 10%;\\\">Pos</th>\\n    <th style=\\\"width: 30%;\\\">{{ _(\\\"Description\\\") }}<th>\\n    <th style=\\\"width: 20%;\\\">{{ _(\\\"Price\\\") }}</th>\\n    <th style=\\\"width: 20%;\\\">{{ _(\\\"Quantity\\\") }}</th>\\n    <th style=\\\"width: 20%;\\\">{{ _(\\\"Amount\\\") }}</th>\\n </tr>\\n {% for n in doc.items %}\\n {% set u = frappe.get_doc(\\\"Item\\\", n.item_code) %}\\n <tr>\\n    <td>{{ loop.index }}</td>\\n    <td>{{ u.customer_item_name}}</td>\\n    <td><!-- format shift correction --></td>\\n    <td>{{ n.get_formatted('price_list_rate') }}</td>\\n    <td>{{ n.qty }} {{ n.stock_uom }}</td>\\n    <td>{{ n.get_formatted('amount') }}</td>\\n </tr>\\n {% endfor %}\\n </table>\\n\\n<!-- summary and taxes -->\\n<p></p>\\n<table style=\\\"width: 100%; font-family: 'Open Sans', sans-serif;\\\">\\n<tr>\\n    <td style=\\\"width: 60%;\\\"></td>\\n    <td style=\\\"width: 20%;\\\">\\n\\t  {{ _(\\\"Net Total\\\") }}<br />\\n\\t  {% for t in doc.taxes %}\\n\\t    {{ t.description }}<br />\\n\\t  {% endfor %}\\n\\t  {% if doc.discount_amount != 0 %}\\n\\t    {{ _(\\\"Discount\\\") }}<br />\\n\\t  {% endif %}\\n\\t  <strong>{{ _(\\\"Total Amount\\\") }}</strong>\\n    </td>\\n    <td style=\\\"width: 20%;\\\">\\n\\t  {{ doc.get_formatted('total') }}<br />\\n\\t  {% for t in doc.taxes %}\\n\\t    {{ t.get_formatted('tax_amount') }}<br />\\n\\t  {% endfor %}\\t  \\n\\t  {% if doc.discount_amount != 0 %}\\n\\t    -{{ doc.get_formatted('discount_amount') }}<br />\\n\\t  {% endif %}\\n\\t  <strong>{{ doc.get_formatted('grand_total') }}</strong>\\n     </td>\\n</tr>\\n</table>\\n\\n<p style=\\\"font-family: 'Open Sans', sans-serif;\\\"><br />\\n{{ doc.terms }}</p>\", \"fieldname\": \"_custom_html\", \"fieldtype\": \"HTML\", \"label\": \"Custom HTML\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Item\"}, {\"fieldtype\": \"Column Break\"}, {\"print_hide\": 0, \"options\": \"<p style=\\\"font-family: 'Open Sans', sans-serif;\\\"><br /><strong>{{ _(\\\"Item Matrix\\\") }}</strong></p>\\n\\n<!-- create master array(needed for variants) and master_unique array (needed for items without variants) -->\\n{% set master = {} %}\\n{% set master_unique = [] %}\\n\\n<!-- read all templates from sales invoice items and add to master array -->\\n{% set templates = [] %}\\n{% for artikel in doc.items %}\\n\\t{% set artikeldetails = frappe.get_doc(\\\"Item\\\", artikel.item_code) %}\\n\\t{% if artikeldetails.variant_of != None %}\\n\\t\\t{% if templates.append(artikeldetails.variant_of) %}{% endif %}\\n\\t{% else %}\\n\\t\\t{% if master_unique.append(artikel.item_code) %}{% endif %}\\n\\t{% endif %}\\n{% endfor %}\\n{% if master.update({\\\"templates\\\":templates}) %}{% endif %}\\n\\n<!-- read all size attributes per template and add to master array -->\\n{% for template_dirty in master[\\\"templates\\\"] | unique | sort %}\\n\\t{% set template = template_dirty | replace(\\\"u\\\",\\\"\\\") %}\\n\\t{% set lookup = frappe.get_doc(\\\"Item\\\", template) %}\\n\\t\\t{% set sizes_storage = [] %}\\n\\t\\t{% for sizes in lookup.attributes %}\\n\\t\\t\\t{% if sizes.attribute != \\\"Colour\\\" %}\\n\\t\\t\\t\\t{% if sizes_storage.append(sizes.attribute) %}{% endif %}\\n\\t\\t\\t{% endif %}\\n\\t\\t{% endfor %}\\n\\t\\t{% if master.update({template:sizes_storage}) %}{% endif %}\\n{% endfor %}\\n\\n<!-- read all colours from sales invoice items and add to master array -->\\n{% set colours = [] %}\\n{% for artikel in doc.items %}\\n\\t{% set artikeldetails = frappe.get_doc(\\\"Item\\\", artikel.item_code) %}\\n\\t{% if colours.append(artikeldetails.colour) %}{% endif %}\\n{% endfor %}\\n{% if master.update({\\\"colours\\\":colours}) %}{% endif %}\\n\\n<!-- read all possible sizes per template and add to master array -->\\n{% if master.update({\\\"sizes\\\":{}}) %}{% endif %}\\n{% for template_dirty in master[\\\"templates\\\"] | unique | sort %}\\n\\t{% set template = template_dirty | replace(\\\"u'\\\",\\\"\\\") %}\\n\\t{% if master[\\\"sizes\\\"].update({template:{}}) %}{% endif %}\\n\\t{% for template_size_dirty in master[template] %}\\n\\t\\t{% set template_size = template_size_dirty | replace(\\\"u'\\\",\\\"\\\") %}\\n\\t\\t{% set possible_sizes = frappe.get_all('Item Attribute Value', filters={'parent': template_size}, fields=['abbr']) %}\\n\\t\\t{% set sizes_storage = [] %}\\n\\t\\t{% for size in possible_sizes %}\\n\\t\\t\\t{% if sizes_storage.append(size.abbr) %}{% endif %}\\n\\t\\t{% endfor %}\\n\\t\\t{% if master[\\\"sizes\\\"][template].update({template_size:sizes_storage}) %}{% endif %}\\n\\t{% endfor %}\\n{% endfor %}\\n\\n<!-- complete master with item qty per sizes and colour -->\\n{% if master_unique | count > 0 %}\\n\\t<!--<div style=\\\"font-size: 20px;\\\">{{ _(\\\"Sizes Independent Positions\\\") }}</div><hr/>-->\\n\\t<table style=\\\"width: 100%; padding: 0px !important; font-family: 'Open Sans', sans-serif;\\\">\\n\\t\\t<tbody>\\n\\t\\t\\t<tr style=\\\"font-size: 15px;\\\">\\n\\t\\t\\t\\t<td style=\\\"border-bottom: solid black 2px; background-color: #D8D8D8 !important; padding: 3px !important; width: 18.75%;\\\"><strong>{{ _(\\\"Item\\\") }}</strong></td>\\n\\t\\t\\t\\t<td style=\\\"border-bottom: solid black 2px; background-color: #D8D8D8 !important; padding: 3px !important; width: 25%;\\\"><strong>{{ _(\\\"Description\\\") }}</strong></td>\\n\\t\\t\\t\\t<td style=\\\"border-bottom: solid black 2px; background-color: #D8D8D8 !important; padding: 3px !important; width: 18.75%;\\\"><strong>{{ _(\\\"Quantity\\\") }}</strong></td>\\n\\t\\t\\t\\t<td style=\\\"border-bottom: solid black 2px; background-color: #D8D8D8 !important; padding: 3px !important; width: 18.75%;\\\"><strong>{{ _(\\\"Rate\\\") }}</strong></td>\\n\\t\\t\\t\\t<td style=\\\"border-bottom: solid black 2px; background-color: #D8D8D8 !important; padding: 3px !important; width: 18.75%;\\\"><strong>{{ _(\\\"Amount\\\") }}</strong></td>\\n\\t\\t\\t</tr>\\n\\t\\t\\t{% for itemA in doc.items %}\\n\\t\\t\\t\\t{% for itemB in master_unique %}\\n\\t\\t\\t\\t\\t{% if itemA.item_code == itemB %}\\n\\t\\t\\t\\t\\t\\t<tr style=\\\"font-size: 11px;\\\">\\n\\t\\t\\t\\t\\t\\t\\t<td style=\\\"border-bottom: solid black 1px; padding: 0px !important;\\\">{{ itemA.item_code }}</td>\\n\\t\\t\\t\\t\\t\\t\\t<td style=\\\"border-bottom: solid black 1px; padding: 0px !important;\\\">{{ itemA.description }}</td>\\n\\t\\t\\t\\t\\t\\t\\t<td style=\\\"border-bottom: solid black 1px; padding: 0px !important;\\\">{{ itemA.qty }} {{ itemA.uom }}</td>\\n\\t\\t\\t\\t\\t\\t\\t<td style=\\\"border-bottom: solid black 1px; padding: 0px !important;\\\">{{ doc.currency }} {{ \\\"{:,.2f}\\\".format(itemA.price_list_rate) }}</td>\\n\\t\\t\\t\\t\\t\\t\\t<td style=\\\"border-bottom: solid black 1px; padding: 0px !important;\\\">{{ doc.currency }} {{ \\\"{:,.2f}\\\".format(itemA.amount) }}</td>\\n\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t\\t{% endfor %}\\n\\t\\t\\t{% endfor %}\\n\\t\\t</tbody>\\n\\t</table>\\n\\t<hr />\\n{% endif %}\\n\\n{% if master.templates | count > 0 %}\\n\\t<!--<div style=\\\"font-size: 20px;\\\">{{ _(\\\"Sizes Dependent Positions\\\") }}</div><hr/>-->\\n\\t{% for template_dirty in master[\\\"templates\\\"] | unique | sort %}\\n\\t\\t{% set item_master_per_template = {} %}\\n\\t\\t{% set template = template_dirty | replace(\\\"u'\\\",\\\"\\\") %}\\n\\t\\t{% set anzahl = master[\\\"sizes\\\"][template] | count %}\\n\\t\\t{% set size_def = master[template] | replace(\\\"[u'\\\",\\\"\\\") | replace(\\\"']\\\",\\\"\\\") %}\\n\\t\\t{% set size_anzahl = master[\\\"sizes\\\"][template][size_def] | count + 1 %}\\n\\t\\t<!-- create table for items with 1 dimensional size -->\\n\\t\\t{% if anzahl == 1 %}\\n\\t\\t\\t{% for artikel in doc.items %}\\n\\t\\t\\t\\t{% set artikeldetails = frappe.get_doc(\\\"Item\\\", artikel.item_code) %}\\n\\t\\t\\t\\t{% set act_colour = artikeldetails.colour %}\\n\\t\\t\\t\\t{% if artikeldetails.variant_of == template %}\\n\\t\\t\\t\\t\\t{% if not item_master_per_template[act_colour] %}\\n\\t\\t\\t\\t\\t\\t{% set number1 = artikel.qty | int %}\\n\\t\\t\\t\\t\\t\\t{% if item_master_per_template.update({act_colour:{artikeldetails.size:number1}}) %}{% endif %}\\n\\t\\t\\t\\t\\t{% else %}\\n\\t\\t\\t\\t\\t\\t{% if not item_master_per_template[act_colour][artikeldetails.size] %}\\n\\t\\t\\t\\t\\t\\t\\t{% set number1 = artikel.qty | int %}\\n\\t\\t\\t\\t\\t\\t\\t{% if item_master_per_template[act_colour].update({artikeldetails.size:number1}) %}{% endif %}\\n\\t\\t\\t\\t\\t\\t{% else %}\\n\\t\\t\\t\\t\\t\\t\\t{% set number1 = artikel.qty | int %}\\n\\t\\t\\t\\t\\t\\t\\t{% set number2 = item_master_per_template[act_colour][artikeldetails.size] | int %}\\n\\t\\t\\t\\t\\t\\t\\t{% if item_master_per_template[act_colour].update({artikeldetails.size:number1 + number2}) %}{% endif %}\\n\\t\\t\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t{% endfor %}\\n\\t\\t\\t<!-- generate Table(s) -->\\n\\t\\t\\t<table style=\\\"border: solid black 1px; width: 100%; padding: 0px !important; page-break-inside: avoid !important; font-family: 'Open Sans', sans-serif;\\\">\\n\\t\\t\\t<tbody>\\n\\t\\t\\t\\t<tr style=\\\"font-size: 15px;\\\">\\n\\t\\t\\t\\t\\t<td style=\\\"border: solid black 1px; text-align: center; background-color: #f2f2f2 !important; padding: 0px !important;\\\" colspan={{ size_anzahl }}><strong>{{ template }}</strong></td>\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t<tr style=\\\"font-size: 11px;\\\">\\n\\t\\t\\t\\t<td style=\\\"border: solid black 1px; width: 125px; text-align: center; padding: 0px !important;\\\">{{ _(\\\"Color\\\") }}/{{ _(\\\"Size\\\") }}</td>\\n\\t\\t\\t\\t{% for sizes_in_templates_dirty in master[\\\"sizes\\\"][template] | unique | sort %}\\n\\t\\t\\t\\t\\t{% set sizes_in_templates = sizes_in_templates_dirty | replace(\\\"u'\\\",\\\"\\\") %}\\n\\t\\t\\t\\t\\t{% for size_dirty in master[\\\"sizes\\\"][template][sizes_in_templates] | sort %}\\n\\t\\t\\t\\t\\t\\t{% set size = size_dirty | replace(\\\"u'\\\",\\\"\\\") %}\\n\\t\\t\\t\\t\\t\\t<td style=\\\"border: solid black 1px; text-align: center; padding: 0px !important;\\\"><strong>{{ size }}</strong></td>\\n\\t\\t\\t\\t\\t{% endfor %}\\n\\t\\t\\t\\t{% endfor %}\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t{% for color_dirty in master[\\\"colours\\\"] | unique | sort %}\\n\\t\\t\\t\\t\\t{% set color = color_dirty | replace(\\\"u\\\",\\\"\\\") %}\\n\\t\\t\\t\\t\\t{% if item_master_per_template[color] is defined %}\\n\\t\\t\\t\\t\\t\\t<tr style=\\\"font-size: 11px;\\\">\\n\\t\\t\\t\\t\\t\\t\\t<td style=\\\"border: solid black 1px; text-align: center; padding: 0px !important;\\\"><strong>{{ color }}</strong></td>\\n\\t\\t\\t\\t\\t\\t\\t{% for sizes_in_templates_dirty in master[\\\"sizes\\\"][template] | unique | sort %}\\n\\t\\t\\t\\t\\t\\t\\t\\t{% set sizes_in_templates = sizes_in_templates_dirty | replace(\\\"u'\\\",\\\"\\\") %}\\n\\t\\t\\t\\t\\t\\t\\t\\t{% for size_dirty in master[\\\"sizes\\\"][template][sizes_in_templates] | sort %}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{% set size = size_dirty | replace(\\\"u'\\\",\\\"\\\") %}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{% if item_master_per_template[color][size] is defined %}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td style=\\\"border: solid black 1px; text-align: center; background-color: #CCFFCC !important; padding: 0px !important;\\\"><strong>{{ item_master_per_template[color][size] }}</strong></td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{% else %}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td style=\\\"border: solid black 1px; text-align: center; padding: 0px !important;\\\">0</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t\\t\\t\\t\\t\\t{% endfor %}\\n\\t\\t\\t\\t\\t\\t\\t{% endfor %}\\n\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t\\t{% endfor %}\\n\\t\\t\\t</tbody>\\n\\t\\t\\t</table><br />\\n\\t\\t{% endif %}\\n\\t\\t<!-- create table for items with 2 dimensional size -->\\n\\t\\t{% if anzahl == 2 %}\\n\\t\\t\\t{% for artikel in doc.items %}\\n\\t\\t\\t\\t{% set artikeldetails = frappe.get_doc(\\\"Item\\\", artikel.item_code) %}\\n\\t\\t\\t\\t{% set act_colour = artikeldetails.colour %}\\n\\t\\t\\t\\t{% if artikeldetails.variant_of == template %}\\n\\t\\t\\t\\t\\t{% if not item_master_per_template[act_colour] %}\\n\\t\\t\\t\\t\\t\\t{% set number1 = artikel.qty | int %}\\n\\t\\t\\t\\t\\t\\t{% if item_master_per_template.update({act_colour:{artikeldetails.size:{artikeldetails.second_size:number1}}}) %}{% endif %}\\n\\t\\t\\t\\t\\t{% else %}\\n\\t\\t\\t\\t\\t\\t{% if not item_master_per_template[act_colour][artikeldetails.size] %}\\n\\t\\t\\t\\t\\t\\t\\t{% set number1 = artikel.qty | int %}\\n\\t\\t\\t\\t\\t\\t\\t{% if item_master_per_template[act_colour].update({artikeldetails.size:{artikeldetails.second_size:number1}}) %}{% endif %}\\n\\t\\t\\t\\t\\t\\t{% else %}\\n\\t\\t\\t\\t\\t\\t\\t{% if not item_master_per_template[act_colour][artikeldetails.size][artikeldetails.second_size] %}\\n\\t\\t\\t\\t\\t\\t\\t\\t{% set number1 = artikel.qty | int %}\\n\\t\\t\\t\\t\\t\\t\\t\\t{% if item_master_per_template[act_colour][artikeldetails.size].update({artikeldetails.second_size:number1}) %}{% endif %}\\n\\t\\t\\t\\t\\t\\t\\t{% else %}\\n\\t\\t\\t\\t\\t\\t\\t\\t{% set number1 = artikel.qty | int %}\\n\\t\\t\\t\\t\\t\\t\\t\\t{% set number2 = item_master_per_template[act_colour][artikeldetails.size][artikeldetails.second_size] | int %}\\n\\t\\t\\t\\t\\t\\t\\t\\t{% if item_master_per_template[act_colour][artikeldetails.size].update({artikeldetails.second_size:number1 + number2}) %}{% endif %}\\n\\t\\t\\t\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t{% endfor %}\\n\\t\\t\\t<!-- generate Table(s) -->\\n\\t\\t\\t{% for color_dirty in master[\\\"colours\\\"] | unique | sort %}\\n\\t\\t\\t\\t{% set color = color_dirty | replace(\\\"u\\\",\\\"\\\") %}\\n\\t\\t\\t\\t{% if item_master_per_template[color] is defined %}\\n\\t\\t\\t\\t<table style=\\\"border: solid black 1px; width: 100%; padding: 0px !important; page-break-inside: avoid !important; font-family: 'Open Sans', sans-serif;\\\">\\n\\t\\t\\t\\t<tbody>\\n\\t\\t\\t\\t<tr style=\\\"font-size: 15px;\\\">\\n\\t\\t\\t\\t\\t<td style=\\\"border: solid black 1px; text-align: center; background-color: #D8D8D8 !important; padding: 0px !important;\\\" colspan={{ master[\\\"sizes\\\"][template][\\\"BH_Width\\\"] | count + 1 }}><strong>{{ template }} in {{ color }}</strong></td>\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t<tr style=\\\"font-size: 11px;\\\">\\n\\t\\t\\t\\t\\t<td style=\\\"border: solid black 1px; width: 55px; text-align: center; padding: 0px !important;\\\">{{ _(\\\"Cup\\\") }}/{{ _(\\\"Width\\\") }}</td>\\n\\t\\t\\t\\t\\t{% for size_dirty in master[\\\"sizes\\\"][template][\\\"BH_Width\\\"] | unique | sort %}\\n\\t\\t\\t\\t\\t\\t{% set size = size_dirty | replace(\\\"u'\\\",\\\"\\\") %}\\n\\t\\t\\t\\t\\t\\t<td style=\\\"border: solid black 1px; text-align: center; padding: 0px !important;\\\"><strong>{{ size }}</strong></td>\\n\\t\\t\\t\\t\\t{% endfor %}\\n\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t{% for size_cup_dirty in master[\\\"sizes\\\"][template][\\\"BH_Cup_Size\\\"] | unique | sort %}\\n\\t\\t\\t\\t\\t\\t{% set size_cup = size_cup_dirty | replace(\\\"u'\\\",\\\"\\\") %}\\n\\t\\t\\t\\t\\t\\t<tr style=\\\"font-size: 11px;\\\">\\n\\t\\t\\t\\t\\t\\t\\t<td style=\\\"border: solid black 1px; text-align: center; padding: 0px !important;\\\"><strong>{{ size_cup }}</strong></td>\\n\\t\\t\\t\\t\\t\\t\\t{% for size_width_dirty in master[\\\"sizes\\\"][template][\\\"BH_Width\\\"] | sort %}\\n\\t\\t\\t\\t\\t\\t\\t\\t{% set size_width = size_width_dirty | replace(\\\"u'\\\",\\\"\\\") %}\\n\\t\\t\\t\\t\\t\\t\\t\\t{% if size_width in item_master_per_template[color][size_cup] %}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td style=\\\"border: solid black 1px; text-align: center; background-color: #CCFFCC !important; padding: 0px !important;\\\"><strong>{{ item_master_per_template[color][size_cup][size_width] }}</strong></td>\\n\\t\\t\\t\\t\\t\\t\\t\\t{% else %}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td style=\\\"border: solid black 1px; text-align: center; padding: 0px !important;\\\">0</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t\\t\\t\\t\\t{% endfor %}\\n\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t{% endfor %}\\n\\t\\t\\t\\t{% endif %}\\n\\t\\t\\t\\t</tbody>\\n\\t\\t\\t\\t</table><br />\\n\\t\\t\\t{% endfor %}\\n\\t\\t{% endif %}\\n\\t{% endfor %}\\n\\t<hr />\\n{% endif %}\", \"fieldname\": \"_custom_html\", \"fieldtype\": \"HTML\", \"label\": \"Custom HTML\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Terms\"}, {\"fieldtype\": \"Column Break\"}, {\"print_hide\": 0, \"options\": \"{% if doc.terms %}\\n\\t{{ doc.terms }}\\n{% endif %}\\n<br />\", \"fieldname\": \"_custom_html\", \"fieldtype\": \"HTML\", \"label\": \"Custom HTML\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Invoice\"}, {\"fieldtype\": \"Column Break\"}, {\"print_hide\": 0, \"options\": \"<!-- get receiver details -->\\n{% set cmp_addr = frappe.get_doc(\\\"Address\\\", doc.company_address) %}\\n{% set company = frappe.get_doc(\\\"Company\\\", doc.company) %}\\n{% set address_array = cmp_addr.address_line1.split(\\\" \\\") %}\\n{% set address_line_item_count = address_array | count %}\\n{% set cmp_country = frappe.get_doc(\\\"Country\\\", cmp_addr.country) %}\\n{% set cmp_country_code = cmp_country.code | upper %}\\n{% set cmp_address_line_detail = {'name': doc.company, 'street': '', 'number': '', 'pin': cmp_addr.pincode, 'city': cmp_addr.city, 'country': cmp_country_code } %}\\n{% for i in range(0, (address_line_item_count - 1)) %}\\n  {% if cmp_address_line_detail.update({'street': cmp_address_line_detail.street + \\\" \\\" + address_array[i] }) %}{% endif %}\\n{% endfor %}\\n{% if cmp_address_line_detail.update({'number': address_array[address_line_item_count - 1]}) %}{% endif %}\\n\\n<!-- get payer details -->\\n{% set pay_addr = frappe.get_doc(\\\"Address\\\", doc.customer_address) %}\\n{% set pay_address_array = pay_addr.address_line1.split(\\\" \\\") %}\\n{% set pay_address_line_item_count = pay_address_array | count %}\\n{% set pay_country = frappe.get_doc(\\\"Country\\\", pay_addr.country) %}\\n{% set pay_country_code = pay_country.code | upper %}\\n{% set pay_address_line_detail = {'name': doc.customer, 'street': '', 'number': '', 'pin': pay_addr.pincode, 'city': pay_addr.city, 'country': pay_country_code } %}\\n{% for i in range(0, (pay_address_line_item_count - 1)) %}\\n  {% if pay_address_line_detail.update({'street': pay_address_line_detail.street + \\\" \\\" + pay_address_array[i] }) %}{% endif %}\\n{% endfor %}\\n{% if pay_address_line_detail.update({'number': pay_address_array[pay_address_line_item_count - 1]}) %}{% endif %}\\n\\n<table style=\\\"width: 100%; page-break-inside: avoid !important;\\\">\\n <tr><!-- three columns -->\\n  <td style=\\\"width: 15%;\\\"><!-- blank left column --></td>\\n  <td style=\\\"width: 40%; border-top: 1px solid silver; border-left: 1px solid silver; border-bottom: 1px solid silver;\\\"><!-- middle column -->\\n   <table>\\n    <tr><td>{{ _(\\\"Zahlteil QR-Rechnung\\\") }}</td></tr>\\n    <tr><td>{{ _(\\\"Unterst\\u00fctzt\\\") }}<br />{{ _(\\\"\\u00dcberweisung\\\") }}</td></tr>\\n    <tr><td><!-- QR code -->\\n   <img src=\\\"https://tools.libracore.ch/phpqrcode/api/iso20022.php?iban={{ company.iban }}&receiver_name={{ cmp_address_line_detail.name }}&receiver_street={{ cmp_address_line_detail.street | trim }}&receiver_number={{ cmp_address_line_detail.number }}&receiver_pincode={{ cmp_address_line_detail.pin }}&receiver_town={{ cmp_address_line_detail.city }}&receiver_country={{ cmp_address_line_detail.country }}&final_receiver_name={{ cmp_address_line_detail.name }}&final_receiver_street={{ cmp_address_line_detail.street | trim }}&final_receiver_number={{ cmp_address_line_detail.number }}&final_receiver_pincode={{ cmp_address_line_detail.pin }}&final_receiver_town={{ cmp_address_line_detail.city }}&final_receiver_country={{ cmp_address_line_detail.country }}&amount={{ doc.grand_total }}&currency={{ doc.currency }}&due_date={{ doc.due_date }}&payer_name={{ pay_address_line_detail.name }}&payer_street={{ pay_address_line_detail.street | trim }}&payer_number={{ pay_address_line_detail.number }}&payer_pincode={{ pay_address_line_detail.pin }}&payer_town={{ pay_address_line_detail.city }}&payer_country={{ pay_address_line_detail.country }}&reference_type=QRR&reference={{ doc.esr_reference }}&message=Auftrag vom 15.09.2019##S1/01/20170309/11/10201409/20/14000000/22/36958/30/CH106017086/40/1020/41/3010\\\" style=\\\"width: 46mm; height: 46mm;\\\" />\\n     </td></tr>\\n    <tr><td>\\n     <table style=\\\"width: 100%;\\\">\\n      <tr>\\n       <td style=\\\"width: 100%;\\\">{{ _(\\\"W\\u00e4hrung\\\") }}</td>\\n       <td style=\\\"width: 100%;\\\">{{ _(\\\"Betrag\\\") }}</td>\\n      </tr>\\n      <tr>\\n       <td>{{ doc.currency }}</td><!-- must be with space as thousand separator and point for decimal -->\\n       <td>{{ \\\"{:,.2f}\\\".format(doc.grand_total).replace(\\\",\\\", \\\" \\\") }}</td>\\n      </tr>\\n     </table>\\n    </td></tr>\\n   </table>\\n  </td>\\n\\n  <td style=\\\"width: 45%; border-top: 1px solid silver; border-bottom: 1px solid silver;\\\"><!-- right column -->\\n   <table>\\n    <tr><td>{{ _(\\\"Konto\\\") }}<br />{{ company.iban }}</td></tr>\\n    <tr><td>{{ _(\\\"Zahlungsempf\\u00e4nger\\\") }}<br />\\n      {{ cmp_address_line_detail.name }}<br />\\n      {{ cmp_address_line_detail.street }} {{ cmp_address_line_detail.number }}<br />\\n      {{ cmp_address_line_detail.country }}-{{ cmp_address_line_detail.pin }} {{ cmp_address_line_detail.city }}<br />\\n    </td></tr>\\n    <tr><td>{{ _(\\\"Endg\\u00fcltiger Zahlungsempf\\u00e4nger\\\") }}<br />\\n      {{ cmp_address_line_detail.name }}<br />\\n      {{ cmp_address_line_detail.street }} {{ cmp_address_line_detail.number }}<br />\\n      {{ cmp_address_line_detail.country }}-{{ cmp_address_line_detail.pin }} {{ cmp_address_line_detail.city }}<br />\\n    </td></tr>\\n    <tr><td>{{ _(\\\"Referenznummer\\\") }}<br />\\n      {{ doc.esr_reference }}</td></tr>\\n    <tr><td>{{ _(\\\"Zus\\u00e4tzliche Informationen\\\") }}<br />\\n      Nachricht</td></tr>\\n    <tr><td>{{ _(\\\"Zahlungspflichtiger\\\") }}<br />\\n      {{ pay_address_line_detail.name }}<br />\\n      {{ pay_address_line_detail.street }} {{ pay_address_line_detail.number }}<br />\\n      {{ pay_address_line_detail.country }}-{{ pay_address_line_detail.pin }} {{ pay_address_line_detail.city }}<br />\\n    </td></tr>\\n    <tr><td>{{ _(\\\"Zahlbar bis\\\") }}<br />\\n      {{ doc.get_formatted('due_date') }}</td></tr>\\n   </table>\\n  </td>\\n </tr>\\n</table>\\n<p style=\\\"font-family: 'Open Sans', sans-serif;\\\"><br />{{ _(\\\"Thank you for your order. If you have questions, we are happy to help.\\\") }}</p>\\n<hr />\", \"fieldname\": \"_custom_html\", \"fieldtype\": \"HTML\", \"label\": \"Custom HTML\"}]", 
 "idx": 0, 
 "line_breaks": 0, 
 "modified": "2017-12-15 12:57:26.613887", 
 "modified_by": "joel.mesmer@libracore.com", 
 "module": "Accounts", 
 "name": "Rechnung", 
 "owner": "Administrator", 
 "print_format_builder": 1, 
 "print_format_type": "Server", 
 "show_section_headings": 0, 
 "standard": "Yes"
}
